parameters:
    silverstanRules:
        disallowNonInterfacePublicMethodsOnExtension:
            enabled: true
        disallowOverridingOfConfigurablePropertyType:
            enabled: true
        disallowUseOfReservedConfigurablePropertyName:
            enabled: true
        requireConfigurablePropertyOverride:
            enabled: true
            requiredProperties:
                -
                    class: SilverStripe\ORM\DataObject
                    properties:
                        - table_name
        disallowStaticPropertyFetchOnConfigurableProperty:
            enabled: true
        disallowSuperglobals:
            enabled: true
            disallowedSuperglobals:
                - _GET
                - _POST
                - _FILES
                - _COOKIE
                - _SESSION
                - _REQUEST
                - _ENV
                - GLOBALS

parametersSchema:
    silverstanRules: structure([
        disallowNonInterfacePublicMethodsOnExtension: structure([
            enabled: bool()
        ])
        disallowOverridingOfConfigurablePropertyType: structure([
            enabled: bool()
        ])
        disallowUseOfReservedConfigurablePropertyName: structure([
            enabled: bool()
        ])
        requireConfigurablePropertyOverride: structure([
            enabled: bool()
            requiredProperties: arrayOf(
                structure([
                    class: string(),
                    properties: arrayOf(string())
                ])
            )
        ])
        disallowStaticPropertyFetchOnConfigurableProperty: structure([
            enabled: bool()
        ])
        disallowSuperglobals: structure([
            enabled: bool()
            disallowedSuperglobals: arrayOf(string())
        ])
    ])

conditionalTags:
    Cambis\Silverstan\Rule\ClassMethod\DisallowNonInterfacePublicMethodsOnExtensionRule:
        phpstan.rules.rule: %silverstanRules.disallowNonInterfacePublicMethodsOnExtension.enabled%
    Cambis\Silverstan\Rule\ClassPropertyNode\DisallowOverridingOfConfigurablePropertyTypeRule:
        phpstan.rules.rule: %silverstanRules.disallowOverridingOfConfigurablePropertyType.enabled%
    Cambis\Silverstan\Rule\ClassPropertyNode\DisallowUseOfReservedConfigurablePropertyNameRule:
        phpstan.rules.rule: %silverstanRules.disallowUseOfReservedConfigurablePropertyName.enabled%
    Cambis\Silverstan\Rule\InClassNode\RequireConfigurablePropertyOverrideRule:
        phpstan.rules.rule: %silverstanRules.requireConfigurablePropertyOverride.enabled%
    Cambis\Silverstan\Rule\StaticPropertyFetch\DisallowStaticPropertyFetchOnConfigurablePropertyRule:
        phpstan.rules.rule: %silverstanRules.disallowStaticPropertyFetchOnConfigurableProperty.enabled%
    Cambis\Silverstan\Rule\Variable\DisallowSuperglobalsRule:
        phpstan.rules.rule: %silverstanRules.disallowSuperglobals.enabled%

services:
    -
        class: Cambis\Silverstan\Rule\ClassMethod\DisallowNonInterfacePublicMethodsOnExtensionRule
    -
        class: Cambis\Silverstan\Rule\ClassPropertyNode\DisallowOverridingOfConfigurablePropertyTypeRule
    -
        class: Cambis\Silverstan\Rule\ClassPropertyNode\DisallowUseOfReservedConfigurablePropertyNameRule
    -
        class: Cambis\Silverstan\Rule\InClassNode\RequireConfigurablePropertyOverrideRule
        arguments:
            requiredProperties: %silverstanRules.requireConfigurablePropertyOverride.requiredProperties%
    -
        class: Cambis\Silverstan\Rule\StaticPropertyFetch\DisallowStaticPropertyFetchOnConfigurablePropertyRule
    -
        class: Cambis\Silverstan\Rule\Variable\DisallowSuperglobalsRule
        arguments:
            disallowedSuperglobals: %silverstanRules.disallowSuperglobals.disallowedSuperglobals%
